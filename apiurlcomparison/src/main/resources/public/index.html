<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ApiUrlComparison - APITestingGuard</title>
    <link rel="stylesheet" href="style.css">
    <!-- Google Fonts for premium typography -->
    <link href="https://fonts.googleapis.com/css2?family=Mulish:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <h1 class="logo">
                <img src="logo.svg" alt="RAKS Logo" style="height: 40px; vertical-align: middle; margin-right: 15px;">
                ApiUrlComparison - <span class="highlight">APITestingGuard</span>
            </h1>
            
            <a href="guide.html" target="_blank" class="btn-primary" style="text-decoration: none; display: flex; align-items: center; gap: 8px; margin-bottom: 0; width: auto; padding: 10px 20px; font-size: 16px;">
                <span>ðŸ“˜</span> Guide / Help
            </a>

            <p class="subtitle">Comparison & Validation Suite</p>
        </header>

        <!-- Main Content Grid -->
        <main class="main-grid">
            <!-- Sidebar Column (Mock + Config) -->
            <div class="sidebar-col" style="display: flex; flex-direction: column; min-height: 0; padding-right: 5px;">
                <!-- Mock Server Status Panel -->
                <section class="card mock-panel" style="margin-bottom: 20px; padding: 15px; border-left: 5px solid #27173e; flex-direction: row; justify-content: space-between; align-items: center; flex: 0 0 auto;">
                    <div style="font-weight: 600; color: #27173e;">Mock Server Control</div>
                    <div class="mock-control" style="display: flex; align-items: center; gap: 15px;">
                        <span id="mockStatusText" style="font-size: 0.9rem; font-weight: 600; color: #666;">Status: Initializing...</span>
                        <button id="toggleMockBtn" type="button" class="btn-secondary" style="margin-bottom: 0; padding: 6px 14px; border-radius: 20px;" disabled>Please Wait...</button>
                    </div>
                </section>

                <!-- Working Directory Panel -->
                <section class="card mock-panel" style="margin-bottom: 20px; padding: 15px; border-left: 5px solid #27173e; flex: 0 0 auto;">
                    <div style="font-weight: 600; color: #27173e; margin-bottom: 10px;">Working Directory</div>
                    <div style="display: flex; flex-direction: column; gap: 8px;">
                        <input type="text" id="workingDirectory" placeholder="${app.home}/work/apiurlcomparison" 
                               style="flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-size: 0.9rem;">
                        <small style="color: #666; font-size: 0.8rem;">Leave empty to use default location. Specify custom path to browse older runs from different locations.</small>
                    </div>
                </section>

                <!-- Configuration Panel -->
                <section class="card config-panel" id="configPanel" style="flex: 1; min-height: 0; border-left: 5px solid #27173e;">
                    <div class="card-header">
                        <h2>Configuration</h2>
                        <div class="toggle-group">
                            <label>Type:</label>
                            <select id="testType">
                                <option value="REST">REST</option>
                                <option value="SOAP" selected>SOAP</option>
                            </select>
                        </div>
                        <div class="toggle-group">
                            <label>Mode:</label>
                            <select id="comparisonMode">
                                <option value="LIVE" selected>Live (API1 vs API2)</option>
                                <option value="BASELINE">Baseline Testing</option>
                            </select>
                        </div>
                    </div>

                    <!-- Baseline Controls (shown when BASELINE mode selected) -->
                    <div id="baselineControls" class="baseline-controls" style="display:none;">
                        <div class="baseline-header">
                            <span class="baseline-badge">ðŸ“Š Baseline Mode</span>
                        </div>
    
                        <div class="input-group">
                            <label>Operation:</label>
                            <select id="baselineOperation">
                                <option value="CAPTURE">Capture Baseline</option>
                                <option value="COMPARE">Compare with Baseline</option>
                            </select>
                        </div>
    
                        <!-- Capture Mode Fields -->
                        <div id="captureFields" class="baseline-section">
                            <div class="input-group">
                                <label>Service Name:</label>
                                <input type="text" id="baselineServiceName" placeholder="e.g., AccountService">
                            </div>
                            <div class="input-group">
                                <label>Description:</label>
                                <input type="text" id="baselineDescription" placeholder="e.g., Pre-upgrade baseline v1.0.0">
                            </div>
                            <div class="input-group">
                                <label>Tags (comma-separated):</label>
                                <input type="text" id="baselineTags" placeholder="e.g., v1.0.0, pre-upgrade">
                            </div>
                        </div>
    
                        <!-- Compare Mode Fields -->
                        <div id="compareFields" class="baseline-section" style="display:none;">
                            <div class="input-group">
                                <label>Select Service:</label>
                                <select id="baselineServiceSelect">
                                    <option value="">-- Select Service --</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label>Select Date:</label>
                                <select id="baselineDateSelect" disabled>
                                    <option value="">-- Select Date --</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label>Select Run:</label>
                                <select id="baselineRunSelect" disabled>
                                    <option value="">-- Select Run --</option>
                                </select>
                            </div>
                        </div>
                    </div>
    
                    <form id="configForm">
                        <div class="row">
                            <div class="input-group">
                                <label>Operation Name</label>
                                <input type="text" id="operationName" placeholder="e.g., createResource" required>
                            </div>
                            <div class="input-group" style="flex: 0 0 120px;">
                                <label>Method</label>
                                <select id="method">
                                    <option value="POST">POST</option>
                                    <option value="GET">GET</option>
                                    <option value="PUT">PUT</option>
                                    <option value="DELETE">DELETE</option>
                                    <option value="PATCH">PATCH</option>
                                </select>
                            </div>
                        </div>
    
                        <div class="row" id="urlRow">
                            <div class="input-group">
                                <label>Endpoint 1 URL</label>
                                <input type="text" id="url1" placeholder="http://api1.example.com/resource" required>
                            </div>
                            <div class="input-group" id="url2Group">
                                <label>Endpoint 2 URL</label>
                                <input type="text" id="url2" placeholder="http://api2.example.com/resource" required>
                            </div>
                        </div>
    
                        <div class="input-group full-width">
                            <label>Payload (JSON/XML Template)</label>
                            <textarea id="payload" placeholder="{ 'id': '{{id}}' }" rows="6"></textarea>
                            <small>Use {{token}} syntax for variable injection from tokens below.</small>
                        </div>

                        <div class="input-group full-width">
                            <label>Ignored Fields (Comparison)</label>
                            <input type="text" id="ignoredFields" placeholder="e.g. timestamp, duration, token" value="timestamp, X-Dynamic-Header">
                            <small>Comma-separated list of JSON/XML fields to ignore during response comparison.</small>
                        </div>
    
                        <!-- Dynamic Headers Section -->
                        <div class="divider"><span>Request Headers</span></div>
                        <div class="dynamic-section">
                            <table id="headersTable" class="input-table">
                                <thead>
                                    <tr>
                                        <th>Header Name</th>
                                        <th>Value</th>
                                        <th width="50px"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Rows added dynamically -->
                                </tbody>
                            </table>
                            <button type="button" class="btn-secondary" id="addHeaderBtn">+ Add Header</button>
                        </div>
    
                        <!-- Dynamic Tokens Section -->
                        <div class="divider"><span>Iteration Tokens</span></div>
                        <div class="input-group">
                            <small>Define variables to iterate over. Multiple values separated by semicolon (;).</small>
                        </div>
                        <div class="dynamic-section">
                            <table id="tokensTable" class="input-table">
                                <thead>
                                    <tr>
                                        <th>Token Name</th>
                                        <th>Values (semicolon separated)</th>
                                        <th width="50px"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Rows added dynamically -->
                                </tbody>
                            </table>
                            <button type="button" class="btn-secondary" id="addTokenBtn">+ Add Token</button>
                        </div>
    
                        <div class="row">
                            <div class="input-group">
                                <label>Iteration Strategy</label>
                                <select id="iterationController">
                                    <option value="ONE_BY_ONE">One-By-One (Efficient)</option>
                                    <option value="ALL_COMBINATIONS">All Combinations (Exhaustive)</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label>Max Iterations</label>
                                <input type="number" id="maxIterations" value="100">
                            </div>
                        </div>
    
                        <!-- Auth Section -->
                        <div class="divider"><span>Authentication (Basic)</span></div>
                        <div class="input-group" style="margin-bottom: 5px;">
                            <label style="display:flex; align-items:center; font-weight:normal;">
                                <input type="checkbox" id="enableAuth" checked style="width:auto; margin-right:8px;"> Enable Authentication
                            </label>
                        </div>
                        <div class="row">
                            <div class="input-group">
                                <label>Client ID</label>
                                <input type="text" id="clientId">
                            </div>
                            <div class="input-group">
                                <label>Client Secret</label>
                                <input type="password" id="clientSecret">
                            </div>
                        </div>
    
                        <button type="submit" class="btn-primary" id="compareBtn">Run Comparison</button>
                    </form>
                </section>
            </div>

            <!-- Resize Handle -->
            <div class="resize-handle" id="resizeHandle"></div>

            <!-- Dashboard / Results Panel -->
            <section class="card results-panel">
                <div class="card-header">
                    <h2>Execution Dashboard</h2>
                    <div id="statusIndicator" class="status-badge hidden">Running...</div>
                </div>

                <div id="resultsContainer" class="results-container">
                    <div class="empty-state">
                        <img src="https://via.placeholder.com/150/f0f0f0/cccccc?text=Waiting" alt="Waiting">
                        <p>Enter configuration and click "Run Comparison" to start.</p>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="app.js"></script>
</body>

</html>