<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Aegis - Consolidated Report</title>
    <style>
        :root {
            --raks-purple: #663399;
            --raks-purple-light: #7d4fb2;
            --text-white: #FFFFFF;
        }
        body {font-family: Arial, sans-serif; margin: 0; background-color: #f0f0f0;}
        .report-container { border: 5px solid var(--raks-purple); padding: 20px 40px; margin: 20px; border-radius: 8px; background-color: white; }
        h1 {color: var(--raks-purple);}
        .card {background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); margin-bottom: 20px;}
        .search-box { margin-bottom: 20px; width: 100%; }
        #searchInput { width: 100%; padding: 12px; border: 2px solid var(--raks-purple); border-radius: 5px; font-size: 16px; box-sizing: border-box; }
        table {width: 100%; border-collapse: collapse;}
        th, td {border: 1px solid #ddd; padding: 12px; text-align: left;}
        th {background: var(--raks-purple); color: var(--text-white); cursor: pointer; position: sticky; top: 0; z-index: 10; }
        th:hover { background-color: var(--raks-purple-light); }
        th::after { content: ' â†•'; font-size: 0.8em; }
        .top-nav-container {
            position: absolute;
            top: 20px;
            right: 40px;
            display: flex;
            gap: 10px;
        }
        .top-nav-button {
            background-color: var(--raks-purple);
            color: var(--text-white);
            border: none;
            padding: 8px 16px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .top-nav-button:hover { background-color: var(--raks-purple-light); }
    </style>
</head>
<body>
    <div class="report-container">
            <div class="top-nav-container">
            <a href="CONSOLIDATED-REPORT.xlsx" class="top-nav-button" style="background-color: #217346;">Excel Report</a>
            <a href="checklist.html" class="top-nav-button">Checklist</a>
        </div>
        <div style="display: flex; align-items: center; margin-bottom: 20px;">
            <img src="logo.svg" alt="Aegis Logo" style="height: 40px; margin-right: 15px;">
            <h1 style="margin: 0;">Aegis Consolidated Report</h1>
        </div>
        <div style="border: 1px solid #ccc; padding: 10px 20px; margin-top: 15px; margin-bottom: 20px; background-color: #fbfbfbff; border-radius: 5px;">
        <h4 style="margin-top: 0; color: #333;">Scan Summary:</h4>
            <strong>Generated:</strong> 2026-01-16 17:46:36 CST<br>
            <strong>Total APIs Scanned:</strong> 2<br>
            <strong>Total Rules:</strong> 70 | <strong style="color:green">Passed:</strong> 41 | <strong style="color:red">Failed:</strong> 29
        </div>
        
        <div class="search-box">
            <input type="text" id="searchInput" onkeyup="filterTable()" placeholder="Search by API name, status, or counts...">
        </div>
        <table id="resultsTable">
            <thead>
                <tr>
                    <th onclick="sortTable(0)">Repository</th>
                    <th onclick="sortTable(1)">API Name</th>
                    <th onclick="sortTable(2)">Total Rules</th>
                    <th onclick="sortTable(3)">Passed</th>
                    <th onclick="sortTable(4)">Failed</th>
                    <th onclick="sortTable(5)">Status</th>
                    <th>Report</th>
                </tr>
            </thead>
            <tbody id="tableBody">
                <tr style='background-color:#ffebee'><td>muleapp1</td><td>muleapp1</td><td>35</td><td>18</td><td>17</td><td><strong style='color:red'>FAIL</strong></td><td><a href='muleapp1/report.html'>View Report</a></td></tr>
<tr style='background-color:#ffebee'><td>muleapp1_config</td><td>muleapp1_config</td><td>35</td><td>23</td><td>12</td><td><strong style='color:red'>FAIL</strong></td><td><a href='muleapp1_config/report.html'>View Report</a></td></tr>

            </tbody>
        </table>
    </div>
    <script>
        function filterTable() {
            var input, filter, table, tr, td, i, txtValue;
            input = document.getElementById("searchInput");
            filter = input.value.toUpperCase();
            table = document.getElementById("resultsTable");
            tr = table.getElementsByTagName("tr");
            for (i = 1; i < tr.length; i++) {
                var found = false;
                var tds = tr[i].getElementsByTagName("td");
                for (var j = 0; j < tds.length; j++) {
                    if (tds[j]) {
                        txtValue = tds[j].textContent || tds[j].innerText;
                        if (txtValue.toUpperCase().indexOf(filter) > -1) {
                            found = true;
                            break;
                        }
                    }
                }
                tr[i].style.display = found ? "" : "none";
            }
        }

        function sortTable(n) {
            var table, rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;
            table = document.getElementById("resultsTable");
            switching = true;
            dir = "asc";
            while (switching) {
                switching = false;
                rows = table.rows;
                for (i = 1; i < (rows.length - 1); i++) {
                    shouldSwitch = false;
                    x = rows[i].getElementsByTagName("TD")[n];
                    y = rows[i + 1].getElementsByTagName("TD")[n];
                    if (dir == "asc") {
                        if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
                            shouldSwitch = true;
                            break;
                        }
                    } else if (dir == "desc") {
                        if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {
                            shouldSwitch = true;
                            break;
                        }
                    }
                }
                if (shouldSwitch) {
                    rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
                    switching = true;
                    switchcount++;
                } else {
                    if (switchcount == 0 && dir == "asc") {
                        dir = "desc";
                        switching = true;
                    }
                }
            }
        }
    </script>
</body>
</html>
